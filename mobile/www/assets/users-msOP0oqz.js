import{s as n,P as l,x as a}from"./index-BHfDbzrd.js";const u=n("users",{state:()=>({users:[],currentUser:null,loading:!1,error:null,userSummary:null,pagination:null,pagingParams:new l}),getters:{userCount:r=>r.users.length},actions:{async fetchUsers(r,e){this.loading=!0,this.error=null;try{const s=new URLSearchParams;r&&s.append("email",r),e&&s.append("username",e),s.append("page",this.pagingParams.pageNumber.toString()),s.append("pageSize",this.pagingParams.pageSize.toString());const i=await a.Users.searchByEmailOrUsername(s);this.$patch({users:i.data,pagination:i.pagination})}catch(s){s instanceof Error?this.$patch({error:s.message||"Erreur lors de la récupération des utilisateurs"}):this.$patch({error:"Erreur inconnue lors de la récupération des utilisateurs"})}finally{this.loading=!1}},async fetchAllUsers(){this.loading=!0,this.error=null;try{const r=new URLSearchParams;r.append("page",this.pagingParams.pageNumber.toString()),r.append("pageSize",this.pagingParams.pageSize.toString());const e=await a.Users.list(r);this.$patch({users:e.data,pagination:e.pagination})}catch(r){r instanceof Error?this.$patch({error:r.message||"Erreur lors de la récupération des utilisateurs"}):this.$patch({error:"Erreur inconnue lors de la récupération des utilisateurs"})}finally{this.loading=!1}},async createUser(r){this.loading=!0,this.error=null;try{const e=await a.Users.create(r);this.$patch({users:[...this.users,e]})}catch(e){e instanceof Error?this.$patch({error:e.message||"Erreur lors de la création de l'utilisateur"}):this.$patch({error:"Erreur inconnue lors de la création de l’utilisateur"})}finally{this.loading=!1}},async getUserDetails(r){this.loading=!0,this.error=null;try{const e=await a.Users.details(r);this.$patch({currentUser:e})}catch(e){e instanceof Error?this.$patch({error:e.message||"Erreur lors de la récupération des détails de l'utilisateur"}):this.$patch({error:"Erreur inconnue lors de la récupération des détails de l’utilisateur"})}finally{this.loading=!1}},async updateUser(r,e){this.loading=!0,this.error=null;try{const s=await a.Users.update(r,e);this.users.findIndex(t=>t.id===r)!==-1&&this.$patch({users:this.users.map(t=>t.id===r?s:t)})}catch(s){s instanceof Error?this.$patch({error:s.message||"Erreur lors de la mise à jour de l'utilisateur"}):this.$patch({error:"Erreur inconnue lors de la mise à jour de l’utilisateur"})}finally{this.loading=!1}},async deleteUser(r){this.loading=!0,this.error=null;try{await a.Users.remove(r),this.$patch({users:this.users.filter(e=>e.id!==r)})}catch(e){e instanceof Error?this.$patch({error:e.message||"Erreur lors de la suppression de l'utilisateur"}):this.$patch({error:"Erreur inconnue lors de la suppression de l’utilisateur"})}finally{this.loading=!1}},setPage(r){this.pagingParams.pageNumber=r,this.fetchAllUsers()},setPageSize(r){this.pagingParams.pageSize=r,this.fetchAllUsers()}}});export{u};
